<Window x:Class="TechKingPOS.App.SalesWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Sales"
        Height="700"
        Width="Auto"
        WindowStartupLocation="CenterScreen"
        Background="#F5F6FA"
        ShowInTaskbar="False"
        ResizeMode="NoResize"
        WindowStyle="None">


    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="300"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- ================= LEFT PANEL ================= -->
        <DockPanel Grid.Column="0" Margin="0,0,10,0">

            <!-- Search -->
            <Grid DockPanel.Dock="Top" Margin="0,0,0,10">
                <TextBox x:Name="SearchBox"
                        Height="36"
                        Padding="8"/>

                <TextBlock Text="Search item..."
                        Margin="12,0"
                        VerticalAlignment="Center"
                        Foreground="#888"
                        IsHitTestVisible="False">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Visible"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Text.Length, ElementName=SearchBox}" Value="0">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Text.Length, ElementName=SearchBox}" Value="1">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </Grid>


            <!-- Items list -->
            <ListBox x:Name="ItemsList"
                     FontSize="14"
                     DisplayMemberPath="Item2"
                     MouseDoubleClick="ItemsList_DoubleClick"/>
           

        </DockPanel>

        <!-- ================= RIGHT PANEL ================= -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="125"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="250"/>
            </Grid.RowDefinitions>

            <!-- TOP -->
            <!-- ================= TOP RESERVED PANEL ================= -->
<Border Grid.Row="0"
        Background="White"
        CornerRadius="8"
        Padding="10">

    <Grid>
        <Grid.ColumnDefinitions>
            <!-- Customers -->
            <ColumnDefinition Width="3*"/>
            <!-- Total Served -->
            <ColumnDefinition Width="1.5*"/>
            <!-- Payments -->
            <ColumnDefinition Width="1.5*"/>
        </Grid.ColumnDefinitions>

        <!-- ========== ACTIVE CUSTOMERS (2 x 3) ========== -->
        <UniformGrid Grid.Column="0"
                     Columns="2"
                     Rows="3"
                     Margin="0,0,10,0">

            <!-- Customer Slots (placeholders) -->
            <Button x:Name="Customer1Btn" Content="Customer 1" Height="25" Click="Customer_Click"/>
            <Button x:Name="Customer2Btn" Content="Customer 2" Height="25" Visibility="Collapsed" Click="Customer_Click"/>
            <Button x:Name="Customer3Btn" Content="Customer 3" Height="25" Visibility="Collapsed" Click="Customer_Click"/>
            <Button x:Name="Customer4Btn" Content="Customer 4" Height="25" Visibility="Collapsed" Click="Customer_Click"/>
            <Button x:Name="Customer5Btn" Content="Customer 5" Height="25" Visibility="Collapsed" Click="Customer_Click"/>
            <Button x:Name="Customer6Btn" Content="Customer 6" Height="25" Visibility="Collapsed" Click="Customer_Click"/>

        </UniformGrid>

        <!-- ========== TOTAL SERVED ========== -->
        <Border Grid.Column="1"
                Background="#F5F6FA"
                CornerRadius="6"
                Height="80"
                Padding="10"
                Margin="0,0,10,0">

            <StackPanel VerticalAlignment="Center" >
                <TextBlock Text="TOTAL SERVED"
                           FontSize="14"
                           Height="auto"
                           Foreground="#555"                           
                           HorizontalAlignment="Center"/>

                <TextBlock Text="0"
                           FontSize="12"
                           Height="20"
                           Foreground="#2E86DE"
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
            </StackPanel>

        </Border>

        <!-- ========== PAYMENT METHODS ========== -->
        <Border Grid.Column="2"
                Background="#F5F6FA"
                CornerRadius="6"
                Height="800"
                Padding="10">

            <StackPanel>
                <TextBlock Text="PAYMENT"
                           FontSize="14"
                           Foreground="#555"
                           Margin="0,0,0,6"/>

               <Button x:Name="MpesaQuickBtn"
                    Content="ðŸ’³ MPesa"
                    Height="30"
                    Margin="0,0,0,6"
                    Click="QuickPayment_Click"/>

                <Button x:Name="CashQuickBtn"
                    Content="ðŸ’µ Cash"
                    Height="30"
                    Click="QuickPayment_Click"/>

            </StackPanel>

        </Border>

    </Grid>
</Border>


            <!-- CART -->
            <DataGrid
                    Grid.Row="1"
                    x:Name="CartGrid"
                    Margin="0,10,0,10"
                    AutoGenerateColumns="False"
                    CanUserAddRows="False"
                    IsReadOnly="True"

                    GridLinesVisibility="None"
                    BorderThickness="0"
                    HeadersVisibility="Column"
                    RowBackground="Transparent"
                    AlternatingRowBackground="Transparent"
                    >

                    <DataGrid.RowStyle>
                            <Style TargetType="DataGridRow">
                                <Setter Property="Margin" Value="0,4"/> <!-- spacing -->
                                <Setter Property="Background" Value="White"/>
                                <Setter Property="BorderThickness" Value="0"/>
                                <Setter Property="SnapsToDevicePixels" Value="True"/>

                                <Style.Triggers>
                                    <Trigger Property="IsSelected" Value="True">
                                        <Setter Property="Background" Value="#EAF3FF"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                    </Trigger>

                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#F5F8FC"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </DataGrid.RowStyle>

                        <DataGrid.Resources>
                        <Style TargetType="DataGridCell">
                            <Setter Property="Padding" Value="6,4"/>
                            <Setter Property="FontSize" Value="16"/>
                            <Setter Property="BorderThickness" Value="0"/>
                        </Style>
                    </DataGrid.Resources>


                <DataGrid.Columns>
                    <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*"/>
                    <DataGridTextColumn Header="Qty" Binding="{Binding Quantity}" Width="60"/>
                    <DataGridTextColumn Header="Unit" Binding="{Binding Unit}" Width="80"/>
                    <DataGridTextColumn Header="Price" Binding="{Binding Price}" Width="100"/>
                    <DataGridTextColumn Header="Total" Binding="{Binding Total}" Width="120"/>
                </DataGrid.Columns>
            </DataGrid>

            <!-- BOTTOM -->
            <Grid Grid.Row="2" Margin="0,10,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="400"/>
                </Grid.ColumnDefinitions>

                <UniformGrid Columns="2"
                     Grid.Column="0" Margin="0,0,10,0" Background="White" >
    <Button Content="Change Qty"
            Height="40"
            Width="150"
            Click="ChangeQty_Click"/>

    <Button Content="Change Price"
            Height="40"
            Width="150"
            Click="ChangePrice_Click"/>

    <Button Content="Delete Item"
            Height="40"
            Width="150"
            Click="DeleteItem_Click"/>

    <Button Content="Delete All"
            Height="40"
            Width="150"            
            Click="DeleteAll_Click"/>

     <Button Content="Discount"
            Height="40"
            Width="150" 
            Click="Discount_Click"           
            />
            <Button Content="Add Customer"
            Height="40"
            Width="150" 
            Click="AddCustomer_Click"           
            />



</UniformGrid>


    <Border Grid.Column="1"
        Background="White"
        CornerRadius="6"
        Margin="0,-10,0,0"
        Padding="12">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>  <!-- Total Items -->
            <RowDefinition Height="Auto"/>  <!-- Subtotal -->
            <RowDefinition Height="Auto"/>  <!-- Discount -->
            <RowDefinition Height="Auto"/>  <!-- TOTAL -->
            <RowDefinition Height="Auto"/>  <!-- Cash Given -->
            <RowDefinition Height="Auto"/>  <!-- Change -->
            <RowDefinition Height="Auto"/>  <!-- Print -->
            <RowDefinition Height="*"/>     <!-- Finish -->
        </Grid.RowDefinitions>

        <!-- TOTAL ITEMS -->
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="Total Items"/>
            <TextBlock x:Name="TotalItemsText"
                       Grid.Column="1"
                       FontWeight="Bold"
                       Text="0"/>
        </Grid>

        <!-- SUBTOTAL -->
        <Grid Grid.Row="1" Margin="0,6,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="Subtotal"/>
            <TextBlock x:Name="SubtotalText"
                       Grid.Column="1"
                       FontWeight="Bold"
                       Text="0.00"/>
        </Grid>

        <!-- DISCOUNT -->
        <Grid Grid.Row="2" Margin="0,6,0,0"
              x:Name="DiscountRow"
              Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="Discount"/>
            <TextBlock x:Name="DiscountText"
                       Grid.Column="1"
                       Foreground="Red"
                       Text="-0.00"/>
        </Grid>

        <!-- TOTAL -->
        <Grid Grid.Row="3" Margin="0,8,0,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="TOTAL"
                       FontSize="16"
                       FontWeight="Bold"/>
            <TextBlock x:Name="TotalAmountText"
                       Grid.Column="1"
                       FontSize="22"
                       FontWeight="Bold"
                       Foreground="Green"
                       Text="0.00"/>
        </Grid>

        <!-- CASH GIVEN -->
        <Grid Grid.Row="4" Margin="0,6,0,0"
              x:Name="CashRow"
              Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="120"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="Cash Given"/>
            <TextBox x:Name="CashGivenBox"
                     Grid.Column="1"
                     Height="30"
                     Padding="6"
                     FontWeight="Bold"
                     TextChanged="CashGiven_TextChanged"/>
        </Grid>

        <!-- CHANGE -->
        <Grid Grid.Row="5" Margin="0,6,0,0"
              x:Name="ChangeRow"
              Visibility="Collapsed">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="Change"/>
            <TextBlock x:Name="ChangeText"
                       Grid.Column="1"
                       FontWeight="Bold"
                       Text="0.00"/>
        </Grid>

        <!-- PRINT -->
        <CheckBox x:Name="PrintReceiptCheckBox"
                  Grid.Row="6"
                  Content="Print Receipt"
                  Margin="0,10,0,10"/>

        <!-- FINISH -->
        <Button Grid.Row="7"
                Content="FINISH &amp; PAY"
                Height="30"
                FontSize="18"
                Background="#2E86DE"
                Foreground="White"
                Click="FinishPay_Click"/>
    </Grid>
</Border>

            </Grid>
        </Grid>
    </Grid>
</Window>
